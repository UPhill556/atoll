<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Romantic Games ğŸ’œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #e3f0fc 0%, #b8d8f8 100%);
      color: #2d224c;
      font-family: 'Comic Sans MS', 'Comic Sans', Arial, sans-serif;
      text-align: center;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    .tab-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0 10px 0;
      width: 100%;
      max-width: 400px;
    }
    .tab-btn {
      flex: 1;
      padding: 12px 0;
      background: #7c6ee6;
      color: #fff;
      border: none;
      border-radius: 10px 10px 0 0;
      font-size: 1.1em;
      font-family: inherit;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      outline: none;
      letter-spacing: 0.03em;
      box-shadow: 0 2px 8px #e3e3fa33;
    }
    .tab-btn.active {
      background: #fff;
      color: #7c6ee6;
      font-weight: bold;
      border-bottom: 2px solid #7c6ee6;
    }
    .tab-content {
      width: 100%;
      max-width: 420px;
      margin: 0 auto;
      background: #f8faff;
      border-radius: 0 0 16px 16px;
      box-shadow: 0 2px 12px #b8d8f833;
      padding: 20px 10px 30px 10px;
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    /* --- Romantic Message Generator styles --- */
    #romantic-message #message {
      font-size: 1.5em;
      padding: 16px;
      max-width: 90%;
      margin: 0 auto 20px auto;
      color: #5a2e8a;
      background: #e8f0fe;
      border-radius: 12px;
      min-height: 60px;
      letter-spacing: 0.01em;
      box-shadow: 0 1px 6px #b8d8f855;
    }
    #romantic-message .buttons {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-top: 10px;
    }
    #romantic-message button {
      background-color: #7c6ee6;
      color: #fff;
      border: 2px solid #fff;
      padding: 12px 22px;
      font-size: 1em;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s, color 0.2s, box-shadow 0.2s;
      font-family: inherit;
      font-weight: bold;
      touch-action: manipulation;
      box-shadow: 0 2px 8px #e3e3fa33;
    }
    #romantic-message button:focus,
    #romantic-message button:hover {
      background-color: #a89cf3;
      color: #2d224c;
      box-shadow: 0 4px 12px #b8d8f855;
    }
    /* --- Find the Heart styles --- */
    #find-heart h1 {
      color: #5a2e8a;
      font-size: 1.4em;
      margin-bottom: 8px;
      letter-spacing: 0.02em;
      text-shadow: 0 1px 0 #fff, 0 2px 8px #b8d8f855;
    }
    #find-heart p {
      color: #2d224c;
      font-size: 1em;
      margin-bottom: 10px;
      opacity: 0.85;
    }
    #find-heart .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      justify-content: center;
      margin: 18px auto 0 auto;
      max-width: 340px;
    }
    #find-heart .box {
      width: 70px;
      height: 70px;
      background-color: #e8f0fe;
      border: 2px solid #7c6ee6;
      border-radius: 12px;
      cursor: pointer;
      font-size: 2em;
      line-height: 70px;
      transition: 0.2s;
      color: #7c6ee6;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      user-select: none;
      touch-action: manipulation;
      box-shadow: 0 1px 6px #b8d8f855;
    }
    #find-heart .box:hover, #find-heart .box:focus {
      background-color: #d1e0fa;
      outline: 2px solid #a89cf3;
    }
    #find-heart #gameMessage {
      margin-top: 22px;
      font-size: 1.1em;
      color: #5a2e8a;
      min-height: 30px;
      background: #f3f0fa;
      border-radius: 8px;
      padding: 8px 0;
      box-shadow: 0 1px 6px #b8d8f833;
    }
    #find-heart #attempts {
      margin-top: 8px;
      font-size: 1em;
      color: #5a2e8a;
      font-weight: bold;
      letter-spacing: 0.02em;
    }
    #find-heart #gameOverVideoContainer {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(44, 34, 76, 0.92);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      cursor: default;
    }
    #find-heart #gameOverVideo {
      max-width: 96vw;
      max-height: 80vh;
      border-radius: 12px;
      box-shadow: 0 0 30px #7c6ee6;
      background: #22223b;
    }
    /* --- Prato Fiorito styles --- */
    #prato-fiorito h1 {
      color: #b30000;
      font-size: 1.6em;
      margin-bottom: 10px;
      letter-spacing: 0.02em;
      text-shadow: 0 1px 0 #fff, 0 2px 8px rgba(179, 0, 0, 0.7);
    }
    #prato-fiorito .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      justify-content: center;
      margin: 16px auto 0 auto;
      max-width: 360px;
    }
    #prato-fiorito .box {
      width: 80px;
      height: 80px;
      background-color: #fff3f3;
      border: 2px solid #b30000;
      border-radius: 12px;
      cursor: pointer;
      font-size: 2.5em;
      line-height: 80px;
      transition: 0.2s;
      color: #b30000;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      user-select: none;
      touch-action: manipulation;
      box-shadow: 0 1px 6px rgba(179, 0, 0, 0.5);
    }
    #prato-fiorito .box:hover, #prato-fiorito .box:focus {
      background-color: #ffe6e6;
      outline: 2px solid #ff9999;
    }
    #prato-fiorito #pratoMessage {
      margin-top: 18px;
      font-size: 1.1em;
      color: #5a2e8a;
      min-height: 30px;
      background: #f3f0fa;
      border-radius: 8px;
      padding: 10px 0;
      box-shadow: 0 1px 6px rgba(179, 0, 0, 0.5);
    }
    #prato-fiorito #pratoGameOverVideoContainer {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #prato-fiorito #pratoGameOverVideo {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 12px;
      box-shadow: 0 0 30px rgba(179, 0, 0, 0.7);
      background: #000;
    }
    @media (max-width: 600px) {
      .tab-content {
        padding: 10px 2vw 20px 2vw;
      }
      #find-heart .grid, #prato-fiorito .grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 7px;
        max-width: 98vw;
      }
      #find-heart .box, #prato-fiorito .box {
        width: 16vw;
        height: 16vw;
        min-width: 48px;
        min-height: 48px;
        font-size: 1.5em;
      }
    }
  </style>
</head>
<body>
  <div class="tab-buttons" role="tablist">
    <button class="tab-btn active" onclick="showTab('romantic-message')" role="tab" aria-selected="true" aria-label="Romantic Message">ğŸ’Œ Romantic Message</button>
    <button class="tab-btn" onclick="showTab('find-heart')" role="tab" aria-selected="false" aria-label="Find the Heart">ğŸ’œ Find the Heart</button>
    <button class="tab-btn" onclick="showTab('prato-fiorito')" role="tab" aria-selected="false" aria-label="FNAF">ğŸ® FNAF</button>
  </div>

  <!-- Romantic Message Generator -->
  <div class="tab-content active" id="romantic-message">
    <div id="message">Click "Generate" to receive a sweet message ğŸ’œ</div>
    <div class="buttons">
      <button onclick="generateMessage()">Generate</button>
      <button onclick="translateMessage()">Translate</button>
    </div>
  </div>

  <!-- Find the Heart Game -->
  <div class="tab-content" id="find-heart">
    <h1>ğŸ Find the Heart ğŸ’œ</h1>
    <p>Only 9 attempts to find my heart hidden in one of these boxes. Good luck!</p>
    <div class="grid" id="gameGrid"></div>
    <div id="attempts">Attempts left: 9</div>
    <div id="gameMessage"></div>
    <audio id="wrongSound" preload="auto" src="wrong.mp3"></audio>
    <audio id="winSound" preload="auto" src="win.mp3"></audio>
    <div id="gameOverVideoContainer">
      <video id="gameOverVideo" src="gameover.mp4" preload="auto"></video>
    </div>
  </div>

  <!-- Prato Fiorito Game -->
  <div class="tab-content" id="prato-fiorito">
    <h1 style="color:#b30000;">
      ğŸ§¸ Freddy Fazballs ğŸ§¸ 
    </h1>
    <div style="font-size:2em; margin-bottom: 10px;">
      ğŸ§¸ğŸ¦ŠğŸ°ğŸ”
    </div>
    <div class="grid" id="pratoGameGrid"></div>
    <div id="pratoMessage" style="margin-top:18px; font-size:1.1em; color:#5a2e8a; min-height:30px; background:#e8f0fe; border-radius:8px; padding:10px 0; box-shadow:0 1px 6px #b8d8f855;">
      ğŸ§ I was actually coming here to pick up a cupcake... ğŸ§
    </div>

    <audio id="pratoWrongSound" preload="auto" src="wrong.mp3"></audio>
    <audio id="pratoWinSound" preload="auto" src="win.mp3"></audio>

    <div id="pratoGameOverVideoContainer" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.9);display:none;justify-content:center;align-items:center;z-index:9999;">
      <video id="pratoGameOverVideo" preload="auto" style="max-width:100%;max-height:100%;border-radius:12px;box-shadow:0 0 30px #000;background:black;"></video>
    </div>
  </div>

  <script>
    // Tab switching logic con accessibilitÃ 
    function showTab(tabId) {
      const tabs = document.querySelectorAll('.tab-btn');
      const contents = document.querySelectorAll('.tab-content');
      tabs.forEach((btn, idx) => {
        btn.classList.remove('active');
        btn.setAttribute('aria-selected', 'false');
      });
      contents.forEach(tab => tab.classList.remove('active'));
      if(tabId === 'romantic-message') {
        tabs[0].classList.add('active');
        tabs[0].setAttribute('aria-selected', 'true');
      } else if(tabId === 'find-heart') {
        tabs[1].classList.add('active');
        tabs[1].setAttribute('aria-selected', 'true');
        initGame();
      } else if(tabId === 'prato-fiorito') {
        tabs[2].classList.add('active');
        tabs[2].setAttribute('aria-selected', 'true');
        initPratoGame();
      }
      document.getElementById(tabId).classList.add('active');
    }

    // Romantic Message Generator logic
    const messages = [
      { en: "I love your smile. ğŸ’œ", fr: "J'aime ton sourire. ğŸ’œ" },
      { en: "You are my favorite person. ğŸ’œ", fr: "Tu es ma personne prÃ©fÃ©rÃ©e. ğŸ’œ" },
      { en: "Every day with you is special. ğŸ’œ", fr: "Chaque jour avec toi est spÃ©cial. ğŸ’œ" },
      { en: "You make my heart happy. ğŸ’œ", fr: "Tu rends mon cÅ“ur heureux. ğŸ’œ" },
      { en: "I can't stop thinking about you. ğŸ’œ", fr: "Je ne peux pas arrÃªter de penser Ã  toi. ğŸ’œ" },
      { en: "You're all I need. ğŸ’œ", fr: "Tu es tout ce dont j'ai besoin. ğŸ’œ" },
      { en: "You complete me. ğŸ’œ", fr: "Tu me complÃ¨tes. ğŸ’œ" },
      { en: "My heart belongs to you. ğŸ’œ", fr: "Mon cÅ“ur t'appartient. ğŸ’œ" },
      { en: "You are my everything. ğŸ’œ", fr: "Tu es tout pour moi. ğŸ’œ" },
      { en: "Your voice is my favorite sound. ğŸ’œ", fr: "Ta voix est mon son prÃ©fÃ©rÃ©. ğŸ’œ" },
      { en: "You make me feel safe. ğŸ’œ", fr: "Tu me fais sentir en sÃ©curitÃ©. ğŸ’œ" },
      { en: "You are the reason I smile. ğŸ’œ", fr: "Tu es la raison pour laquelle je souris. ğŸ’œ" },
      { en: "I love the way you look at me. ğŸ’œ", fr: "J'aime la faÃ§on dont tu me regardes. ğŸ’œ" },
      { en: "You're my happy place. ğŸ’œ", fr: "Tu es mon endroit heureux. ğŸ’œ" },
      { en: "You are my light in the dark. ğŸ’œ", fr: "Tu es ma lumiÃ¨re dans le noir. ğŸ’œ" },
      { en: "I feel lucky to have you. ğŸ’œ", fr: "Je me sens chanceux de t'avoir. ğŸ’œ" },
      { en: "You're my dream come true. ğŸ’œ", fr: "Tu es mon rÃªve devenu rÃ©alitÃ©. ğŸ’œ" },
      { en: "You're the best part of my day. ğŸ’œ", fr: "Tu es la meilleure partie de ma journÃ©e. ğŸ’œ" },
      { en: "I want to be with you forever. ğŸ’œ", fr: "Je veux Ãªtre avec toi pour toujours. ğŸ’œ" },
      { en: "You make my life better. ğŸ’œ", fr: "Tu rends ma vie meilleure. ğŸ’œ" },
      { en: "I adore you. ğŸ’œ", fr: "Je t'adore. ğŸ’œ" },
      { en: "You're the love of my life. ğŸ’œ", fr: "Tu es l'amour de ma vie. ğŸ’œ" },
      { en: "You're so special to me. ğŸ’œ", fr: "Tu es tellement spÃ©cial pour moi. ğŸ’œ" },
      { en: "I love being near you. ğŸ’œ", fr: "J'aime Ãªtre prÃ¨s de toi. ğŸ’œ" },
      { en: "You make me laugh like no one else. ğŸ’œ", fr: "Tu me fais rire comme personne d'autre. ğŸ’œ" },
      { en: "You are my favorite hello and hardest goodbye. ğŸ’œ", fr: "Tu es mon bonjour prÃ©fÃ©rÃ© et mon au revoir le plus difficile. ğŸ’œ" },
      { en: "You bring light into my life. ğŸ’œ", fr: "Tu apportes de la lumiÃ¨re dans ma vie. ğŸ’œ" },
      { en: "I miss you even when you're near. ğŸ’œ", fr: "Tu me manques mÃªme quand tu es proche. ğŸ’œ" },
      { en: "You're everything I ever wanted. ğŸ’œ", fr: "Tu es tout ce que j'ai toujours voulu. ğŸ’œ" },
      { en: "You make me believe in love. ğŸ’œ", fr: "Tu me fais croire en l'amour. ğŸ’œ" },
      { en: "Being with you feels like home. ğŸ’œ", fr: "ÃŠtre avec toi, c'est comme Ãªtre chez moi. ğŸ’œ" },
      { en: "I want to make you happy every day. ğŸ’œ", fr: "Je veux te rendre heureux chaque jour. ğŸ’œ" },
      { en: "You're my one and only. ğŸ’œ", fr: "Tu es mon unique. ğŸ’œ" },
      { en: "I'm proud to love you. ğŸ’œ", fr: "Je suis fier de t'aimer. ğŸ’œ" },
      { en: "I love your laugh. ğŸ’œ", fr: "J'aime ton rire. ğŸ’œ" },
      { en: "You're perfect to me. ğŸ’œ", fr: "Tu es parfait pour moi. ğŸ’œ" },
      { en: "I'm yours, always. ğŸ’œ", fr: "Je suis Ã  toi, toujours. ğŸ’œ" },
      { en: "You're the reason my heart beats. ğŸ’œ", fr: "Tu es la raison pour laquelle mon cÅ“ur bat. ğŸ’œ" },
      { en: "You and me, always. ğŸ’œ", fr: "Toi et moi, toujours. ğŸ’œ" },
      { en: "You're my sweet escape. ğŸ’œ", fr: "Tu es mon doux refuge. ğŸ’œ" },
      { en: "I love the way you love me. ğŸ’œ", fr: "J'aime la faÃ§on dont tu m'aimes. ğŸ’œ" },
      { en: "You're the one I want to wake up next to. ğŸ’œ", fr: "Tu es celui que je veux voir au rÃ©veil. ğŸ’œ" },
      { en: "You're my forever. ğŸ’œ", fr: "Tu es mon pour toujours. ğŸ’œ" },
      { en: "Just thinking of you makes me smile. ğŸ’œ", fr: "Penser Ã  toi me fait sourire. ğŸ’œ" },
      { en: "You are precious to me. ğŸ’œ", fr: "Tu es prÃ©cieux pour moi. ğŸ’œ" },
      { en: "My heart is full of you. ğŸ’œ", fr: "Mon cÅ“ur est rempli de toi. ğŸ’œ" },
      { en: "I love spending time with you. ğŸ’œ", fr: "J'aime passer du temps avec toi. ğŸ’œ" },
      { en: "You're everything good in my life. ğŸ’œ", fr: "Tu es tout ce qu'il y a de bon dans ma vie. ğŸ’œ" },
      { en: "You are my sunshine on a cloudy day. ğŸ’œ", fr: "Tu es mon rayon de soleil par temps nuageux. ğŸ’œ" },
      { en: "With you, every moment is magical. ğŸ’œ", fr: "Avec toi, chaque moment est magique. ğŸ’œ" },
      { en: "I fall in love with you more every day. ğŸ’œ", fr: "Je tombe amoureux de toi un peu plus chaque jour. ğŸ’œ" },
      { en: "You make my world brighter. ğŸ’œ", fr: "Tu rends mon monde plus lumineux. ğŸ’œ" },
      { en: "I cherish every memory with you. ğŸ’œ", fr: "Je chÃ©ris chaque souvenir avec toi. ğŸ’œ" },
      { en: "You are my best friend and my love. ğŸ’œ", fr: "Tu es mon meilleur ami et mon amour. ğŸ’œ" },
      { en: "My favorite place is next to you. ğŸ’œ", fr: "Mon endroit prÃ©fÃ©rÃ© est Ã  cÃ´tÃ© de toi. ğŸ’œ" },
      { en: "You are the sweetest part of my life. ğŸ’œ", fr: "Tu es la partie la plus douce de ma vie. ğŸ’œ" },
      { en: "I love you more than words can say. ğŸ’œ", fr: "Je t'aime plus que les mots ne peuvent le dire. ğŸ’œ" },
      { en: "You are my heart. ğŸ’œ", fr: "Tu es mon cÅ“ur. ğŸ’œ" },
    ];
    let currentIndex = null;
    function generateMessage() {
      const index = Math.floor(Math.random() * messages.length);
      currentIndex = index;
      document.querySelector("#romantic-message #message").textContent = messages[index].en;
    }
    function translateMessage() {
      if (currentIndex !== null) {
        document.querySelector("#romantic-message #message").textContent = messages[currentIndex].fr;
      }
    }

    // Find the Heart Game logic
    const totalBoxes = 16;
    const maxAttempts = 9;
    let attemptsLeft;
    let heartIndex;
    const grid = document.getElementById("gameGrid");
    const gameMessage = document.querySelector("#find-heart #gameMessage");
    const attemptsDisplay = document.getElementById("attempts");
    const wrongSound = document.getElementById("wrongSound");
    const winSound = document.getElementById("winSound");
    const gameOverVideoContainer = document.getElementById("gameOverVideoContainer");
    const gameOverVideo = document.getElementById("gameOverVideo");
    const wrongImgURL = "https://pbs.twimg.com/media/EQRs5SkXkAAJ1py.jpg";
    function initGame() {
      attemptsLeft = maxAttempts;
      attemptsDisplay.textContent = `Attempts left: ${attemptsLeft}`;
      gameMessage.textContent = "";
      gameOverVideoContainer.style.display = "none";
      gameOverVideo.pause();
      gameOverVideo.currentTime = 0;
      grid.innerHTML = "";
      heartIndex = Math.floor(Math.random() * totalBoxes);
      for (let i = 0; i < totalBoxes; i++) {
        const box = document.createElement("div");
        box.classList.add("box");
        box.dataset.index = i;
        box.style.backgroundImage = "";
        box.textContent = "";
        box.style.pointerEvents = "auto";
        box.classList.remove("clicked");
        box.setAttribute("tabindex", "0");
        box.setAttribute("aria-label", "Box");
        box.addEventListener("click", () => handleBoxClick(i, box));
        box.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            handleBoxClick(i, box);
          }
        });
        grid.appendChild(box);
      }
    }
    function handleBoxClick(i, box) {
      if (attemptsLeft <= 0) return;
      if (i === heartIndex) {
        box.innerHTML = "ğŸ’œ";
        gameMessage.innerHTML = "You found my heart, and it's all yours, Korey ğŸ’Œ";
        attemptsDisplay.textContent = "";
        disableAllBoxes();
        playWinSound();
      } else {
        if (!box.classList.contains("clicked")) {
          attemptsLeft--;
          attemptsDisplay.textContent = `Attempts left: ${attemptsLeft}`;
          box.style.backgroundImage = `url(${wrongImgURL})`;
          box.style.backgroundSize = "cover";
          box.style.backgroundPosition = "center";
          box.textContent = "";
          box.classList.add("clicked");
          box.style.pointerEvents = "none";
          if (attemptsLeft > 0) {
            wrongSound.currentTime = 0;
            wrongSound.play();
          } else {
            gameMessage.textContent = "Game over! You ran out of attempts ğŸ˜¢";
            disableAllBoxes();
            showGameOverVideo();
          }
        }
      }
    }
    function disableAllBoxes() {
      const boxes = document.querySelectorAll("#find-heart .box");
      boxes.forEach(box => (box.style.pointerEvents = "none"));
    }
    function playWinSound() {
      if (winSound.src) {
        winSound.currentTime = 0;
        winSound.play();
      }
    }
    function showGameOverVideo() {
      gameOverVideoContainer.style.display = "flex";
      gameOverVideo.play();
    }
    gameOverVideo.addEventListener("ended", () => {
      gameOverVideoContainer.style.display = "none";
      initGame();
    });

    // --- Prato Fiorito Game ---
    const pratoTotalBoxes = 16;
    const pratoTotalBombs = 4;
    let pratoHeartIndex;
    let pratoBombIndexes = [];

    const pratoGrid = document.getElementById("pratoGameGrid");
    const pratoMessage = document.getElementById("pratoMessage");
    const pratoWrongSound = document.getElementById("pratoWrongSound");
    const pratoWinSound = document.getElementById("pratoWinSound");
    const pratoGameOverVideoContainer = document.getElementById("pratoGameOverVideoContainer");
    const pratoGameOverVideo = document.getElementById("pratoGameOverVideo");

    function pratoGetRandomIndexes(exclude, count) {
      const indexes = [];
      while (indexes.length < count) {
        const rnd = Math.floor(Math.random() * pratoTotalBoxes);
        if (!exclude.includes(rnd) && !indexes.includes(rnd)) {
          indexes.push(rnd);
        }
      }
      return indexes;
    }

    function initPratoGame() {
      pratoGameOverVideoContainer.style.display = "none";
      pratoGameOverVideo.pause();
      pratoGameOverVideo.currentTime = 0;

      pratoGrid.innerHTML = "";

      pratoHeartIndex = Math.floor(Math.random() * pratoTotalBoxes);
      pratoBombIndexes = pratoGetRandomIndexes([pratoHeartIndex], pratoTotalBombs);

      const revealed = Array(pratoTotalBoxes).fill(false);

      for (let i = 0; i < pratoTotalBoxes; i++) {
        const box = document.createElement("div");
        box.classList.add("box");
        box.dataset.index = i;

        box.addEventListener("click", () => {
          if (box.classList.contains("clicked")) return;

          if (parseInt(box.dataset.index) === pratoHeartIndex) {
            box.textContent = "ğŸ§";
            box.style.backgroundColor = "#ffe6fa";
            pratoPlayWinSound();
            pratoDisableAllBoxes();
            setTimeout(() => {
              pratoShowWinnerVideo();
            }, 1000); // 1 secondo dopo la vittoria
          } else if (pratoBombIndexes.includes(parseInt(box.dataset.index))) {
            const bombNumber = pratoBombIndexes.indexOf(parseInt(box.dataset.index)) + 1;
            box.textContent = "ğŸ’£" + bombNumber;
            box.style.backgroundColor = "#22223b";
            pratoDisableAllBoxes();
            pratoShowGameOverVideo(bombNumber);
          } else {
            pratoRevealSafe(i);
          }
        });

        pratoGrid.appendChild(box);
      }

      function pratoRevealSafe(idx) {
        const box = pratoGrid.children[idx];
        if (!box || box.classList.contains("clicked") || revealed[idx]) return;
        if (pratoBombIndexes.includes(idx) || idx === pratoHeartIndex) return;

        box.classList.add("clicked");
        box.style.pointerEvents = "none";
        box.style.backgroundColor = "#c7bfff";
        box.textContent = "";

        revealed[idx] = true;

        const row = Math.floor(idx / 4);
        const col = idx % 4;

        const directions = [
          [-1, 0], // sopra
          [1, 0],  // sotto
          [0, -1], // sinistra
          [0, 1]   // destra
        ];

        for (const [dr, dc] of directions) {
          const r = row + dr, c = col + dc;
          if (r >= 0 && r < 4 && c >= 0 && c < 4) {
            const nIdx = r * 4 + c;
            if (!pratoBombIndexes.includes(nIdx) && nIdx !== pratoHeartIndex) {
              const adjBox = pratoGrid.children[nIdx];
              if (!adjBox.classList.contains("clicked") && !revealed[nIdx]) {
                adjBox.classList.add("clicked");
                adjBox.style.pointerEvents = "none";
                adjBox.style.backgroundColor = "#c7bfff";
                adjBox.textContent = "";
                revealed[nIdx] = true;
              }
            }
          }
        }
      }
    }

    function pratoDisableAllBoxes() {
      const boxes = pratoGrid.querySelectorAll(".box");
      boxes.forEach(box => (box.style.pointerEvents = "none"));
    }

    function pratoPlayWinSound() {
      if (pratoWinSound.src) {
        pratoWinSound.currentTime = 0;
        pratoWinSound.play();
      }
    }

    function pratoShowGameOverVideo(bombNumber) {
      pratoGameOverVideo.src = bombNumber + ".mp4";
      pratoGameOverVideoContainer.style.display = "flex";
      pratoGameOverVideo.play();
    }

    function pratoShowWinnerVideo() {
      pratoGameOverVideo.src = "winner.mp4";
      pratoGameOverVideoContainer.style.display = "flex";
      pratoGameOverVideo.play();
    }

    pratoGameOverVideo.addEventListener("ended", () => {
      pratoGameOverVideoContainer.style.display = "none";
      initPratoGame();
    });

    // Inizializza il gioco se la tab Ã¨ attiva al caricamento
    window.addEventListener('DOMContentLoaded', () => {
      const tabs = document.querySelectorAll('.tab-btn');
      if (tabs[1].classList.contains('active')) {
        initGame();
      } else if (tabs[2] && tabs[2].classList.contains('active')) {
        initPratoGame();
      }
    });
  </script>
</body>
</html>
